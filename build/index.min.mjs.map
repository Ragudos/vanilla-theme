{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["type Theme = \"dark\" | \"light\" | \"system\";\r\ntype Storage = \"localStorage\" | \"sessionStorage\";\r\n\r\nlet storage: Storage = \"localStorage\";\r\nlet default_theme: Theme = \"system\";\r\nlet attribute: \"class\" | \"data-theme\" = \"class\";\r\nlet color_scheme: boolean = true;\r\nlet aborter: undefined | AbortController = undefined;\r\n\r\nconst media_query = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n\r\nfunction set_theme() {\r\n    const html = document.documentElement;\r\n    const class_list = html.classList;\r\n    let stored_theme: undefined | null | string;\r\n\r\n    if (aborter) {\r\n        aborter.abort();\r\n        aborter = undefined;\r\n    }\r\n\r\n    if (attribute == \"class\") {\r\n        class_list.remove(\"dark\", \"light\");\r\n    }\r\n\r\n    if (storage == \"localStorage\") {\r\n        stored_theme = localStorage.getItem(\"theme\");\r\n    } else if (storage == \"sessionStorage\") {\r\n        stored_theme = sessionStorage.getItem(\"theme\");\r\n    }\r\n\r\n    if (stored_theme == null || (stored_theme != \"dark\" && stored_theme != \"light\" && stored_theme != \"system\")) {\r\n        stored_theme = default_theme;\r\n    }\r\n\r\n    if (stored_theme == \"dark\" || stored_theme == \"light\") {\r\n        if (attribute == \"class\") {\r\n            class_list.add(stored_theme);\r\n        } else {\r\n            html.setAttribute(\"data-theme\", stored_theme);\r\n        }\r\n\r\n        if (color_scheme) {\r\n            html.style.colorScheme = stored_theme;\r\n        }\r\n    } else {\r\n        if (media_query.matches) {\r\n            if (attribute == \"class\") {\r\n                class_list.add(\"dark\");\r\n            } else {\r\n                html.setAttribute(\"data-theme\", \"dark\");\r\n            }\r\n    \r\n            if (color_scheme) {\r\n                html.style.colorScheme = \"dark\";\r\n            }\r\n        } else {\r\n            if (attribute == \"class\") {\r\n                class_list.add(\"light\");\r\n            } else {\r\n                html.setAttribute(\"data-theme\", \"light\");\r\n            }\r\n    \r\n            if (color_scheme) {\r\n                html.style.colorScheme = \"light\";\r\n            }\r\n        }\r\n        \r\n        aborter = new AbortController();\r\n\r\n        media_query.addEventListener(\"change\", set_theme, { once: true, signal: aborter.signal });\r\n    }\r\n};\r\n\r\n/** Changes the theme to either\r\n * \r\n *  - `light`\r\n *  - `dark`\r\n *  - `system`\r\n * \r\n *  If an invalid value is provided, defaults to the default you provide or \"system\".\r\n */\r\nexport function change_theme(theme: Theme) {\r\n    switch(storage) {\r\n        case \"localStorage\":\r\n            localStorage.setItem(\"theme\", theme);\r\n            break;\r\n        case \"sessionStorage\":\r\n            sessionStorage.setItem(\"theme\", theme);\r\n            break;\r\n    }\r\n\r\n    set_theme();\r\n}\r\n\r\nexport function set_storage(setStorage: \"localStorage\" | \"sessionStorage\") {\r\n    storage = setStorage;\r\n}\r\n\r\n/** The default fallback if a value is neither dark, light, nor system. */\r\nexport function set_default(defaultTheme: Theme) {\r\n    default_theme = defaultTheme;\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", set_theme);\r\n"],
  "mappings": "+EAGA,IAAIA,EAAmB,eACnBC,EAAuB,SACvBC,EAAoC,QACpCC,EAAwB,GACxBC,EAEEC,EAAc,OAAO,WAAW,8BAA8B,EAEpE,SAASC,GAAY,CACjB,IAAMC,EAAO,SAAS,gBAChBC,EAAaD,EAAK,UACpBE,EAEAL,IACAA,EAAQ,MAAM,EACdA,EAAU,QAGVF,GAAa,SACbM,EAAW,OAAO,OAAQ,OAAO,EAGjCR,GAAW,eACXS,EAAe,aAAa,QAAQ,OAAO,EACpCT,GAAW,mBAClBS,EAAe,eAAe,QAAQ,OAAO,IAG7CA,GAAgB,MAASA,GAAgB,QAAUA,GAAgB,SAAWA,GAAgB,YAC9FA,EAAeR,GAGfQ,GAAgB,QAAUA,GAAgB,SACtCP,GAAa,QACbM,EAAW,IAAIC,CAAY,EAE3BF,EAAK,aAAa,aAAcE,CAAY,EAG5CN,IACAI,EAAK,MAAM,YAAcE,KAGzBJ,EAAY,SACRH,GAAa,QACbM,EAAW,IAAI,MAAM,EAErBD,EAAK,aAAa,aAAc,MAAM,EAGtCJ,IACAI,EAAK,MAAM,YAAc,UAGzBL,GAAa,QACbM,EAAW,IAAI,OAAO,EAEtBD,EAAK,aAAa,aAAc,OAAO,EAGvCJ,IACAI,EAAK,MAAM,YAAc,UAIjCH,EAAU,IAAI,gBAEdC,EAAY,iBAAiB,SAAUC,EAAW,CAAE,KAAM,GAAM,OAAQF,EAAQ,MAAO,CAAC,EAEhG,CA7DSM,EAAAJ,EAAA,aAuEF,SAASK,EAAaC,EAAc,CACvC,OAAOZ,EAAS,CACZ,IAAK,eACD,aAAa,QAAQ,QAASY,CAAK,EACnC,MACJ,IAAK,iBACD,eAAe,QAAQ,QAASA,CAAK,EACrC,KACR,CAEAN,EAAU,CACd,CAXgBI,EAAAC,EAAA,gBAaT,SAASE,EAAYC,EAA+C,CACvEd,EAAUc,CACd,CAFgBJ,EAAAG,EAAA,eAKT,SAASE,EAAYC,EAAqB,CAC7Cf,EAAgBe,CACpB,CAFgBN,EAAAK,EAAA,eAIhB,OAAO,iBAAiB,mBAAoBT,CAAS",
  "names": ["storage", "default_theme", "attribute", "color_scheme", "aborter", "media_query", "set_theme", "html", "class_list", "stored_theme", "__name", "change_theme", "theme", "set_storage", "setStorage", "set_default", "defaultTheme"]
}
